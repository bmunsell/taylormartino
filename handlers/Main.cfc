<cfcomponent output="false" singleton>	<cfproperty name="sessionStorage" inject="coldbox:plugin:SessionStorage" scope="variables" />	<cfproperty name="pageService" inject="ioc:pageList" type="ioc" scope="variables" /><!------------------------------------------- GLOBAL IMPLICIT EVENTS ONLY ------------------------------------------>
<!--- In order for these events to fire, you must declare them in the coldbox.xml.cfm --->		<cffunction name="onSessionStart" returntype="void" output="false">		<cfargument name="event">		<cfargument name="rc">		<cfargument name="prc">		<cfscript>				if(findNoCase('blackberry', CGI.HTTP_USER_AGENT)) {				SessionStorage.setVar(name="isMobile",value="1");				SessionStorage.setVar(name="overRide",value="0");			} else if(findNoCase('iphone', CGI.HTTP_USER_AGENT)) {				SessionStorage.setVar(name="isMobile",value="1");				SessionStorage.setVar(name="overRide",value="0");			} else if(findNoCase('android', CGI.HTTP_USER_AGENT)) {				SessionStorage.setVar(name="isMobile",value="1");				SessionStorage.setVar(name="overRide",value="0");			} else {				SessionStorage.setVar(name="isMobile",value="0");				SessionStorage.setVar(name="overRide",value="0");			}				</cfscript>	</cffunction>		<cffunction name="onApplicationStart" returntype="void" output="false">		<cfargument name="event" required="true">		<cfargument name="rc">		<cfargument name="prc">		<cfscript>											</cfscript>	</cffunction>		<cffunction name="onApplicationEnd" returntype="void" output="false">		<cfargument name="event" required="true">	</cffunction>	<cffunction name="onRequestStart" returntype="void" output="false">		<cfargument name="event">		<cfargument name="rc">		<cfargument name="prc">		<cfscript>			/*if(findNoCase('blackberry', CGI.HTTP_USER_AGENT)) {				//getPlugin("SessionStorage").setVar(name="isMobile",value="1");				//getPlugin("SessionStorage").setVar(name="overRide",value="0");				prc.settings.isMobile = 1;								prc.settings.overRide = 0;			} else if(findNoCase('iphone', CGI.HTTP_USER_AGENT)) {				//getPlugin("SessionStorage").setVar(name="isMobile",value="1");				//getPlugin("SessionStorage").setVar(name="overRide",value="0");				prc.settings.isMobile = 1;								prc.settings.overRide = 0;			} else if(findNoCase('android', CGI.HTTP_USER_AGENT)) {				//getPlugin("SessionStorage").setVar(name="isMobile",value="1");				//getPlugin("SessionStorage").setVar(name="overRide",value="0");				prc.settings.isMobile = 1;								prc.settings.overRide = 0;			} else {				//getPlugin("SessionStorage").setVar(name="isMobile",value="0");				//getPlugin("SessionStorage").setVar(name="overRide",value="0");				prc.settings.isMobile = 0;								prc.settings.overRide = 0;			}*/			if(isDefined('rc.overRide') AND rc.overRide) {				SessionStorage.setVar(name="overRide",value="1");			} else if(isDefined('rc.overRide') AND not rc.overRide) {				SessionStorage.setVar(name="overRide",value="0");
			}						prc.settings.isMobile = SessionStorage.getVar(name="isMobile",default="0");			prc.settings.overRide = SessionStorage.getVar(name="overRide",default="0");			prc.settings.theURL = getSetting("websiteurl");			if(prc.settings.ismobile GT 0 and prc.settings.override LT 1){				event.setLayout('Layout.Mobile');			} else if(prc.settings.isMobile LT 1 and prc.settings.overRide GT 0){				event.setLayout('Layout.Mobile');			} else {				event.setLayout('Layout.Main');
			}						prc.bg = pageService.getBG(maxrows=1);		</cfscript>	</cffunction>	<cffunction name="onRequestEnd" returntype="void" output="false">		<cfargument name="event" required="true">		<cfargument name="rc">		<cfargument name="prc">		<cfscript>					</cfscript>	</cffunction>			<cffunction name="onSessionEnd" returntype="void" output="false">		<cfargument name="event" required="true">		<cfset var sessionScope = event.getValue("sessionReference")>		<cfset var applicationScope = event.getValue("applicationReference")>			</cffunction>	<cffunction name="onException" returntype="void" output="false">		<cfargument name="event" required="true">		<cfscript>			//Grab Exception From request collection, placed by ColdBox			var exceptionBean = event.getValue("ExceptionBean");			//Place exception handler below:		</cfscript>	</cffunction>		<cffunction name="onInvalidEvent" returntype="void" output="false">		<cfargument name="event" required="true">		<cfscript>			//Grab Exception From request collection, placed by ColdBox			var exceptionBean = event.getValue("ExceptionBean");			//Place exception handler below:		</cfscript>	</cffunction>		<cffunction name="onMissingTemplate" returntype="void" output="false">		<cfargument name="event" required="true">		<cfscript>			//Grab missingTemplate From request collection, placed by ColdBox			var missingTemplate = event.getValue("missingTemplate");					</cfscript>	</cffunction></cfcomponent>